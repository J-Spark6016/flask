<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Dine Here! - Search</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <style>
      .fixed-button {
          position: fixed;
          left: 50%;
          bottom: 15px;
          transform: translateX(-50%);
      }
    </style>
  </head>
  <body>
    <nav class="navbar bg-light">
        <div class="container">
          <a class="navbar-brand" href="/">
            <img src="{{url_for('static', filename='images/logo.png')}}" alt="Logo" height="24">
          </a>
        </div>
    </nav>
    <div class="row justify-content-center" style = "margin-top: 64px;margin-left: 40px;margin-right: 40px;">
      <h1>종류</h1>
      <div class="form-check">
        <input class="form-check-input" type="checkbox" value="" id="Cb1" checked>
        <label class="form-check-label" for="Cb1">
          한식
        </label>
      </div>
      <div class="form-check">
        <input class="form-check-input" type="checkbox" value="" id="Cb2">
        <label class="form-check-label" for="Cb2">
          중식
        </label>
      </div>
      <div class="form-check">
        <input class="form-check-input" type="checkbox" value="" id="Cb3">
        <label class="form-check-label" for="Cb3">
          일식
        </label>
      </div>
      <div class="form-check">
        <input class="form-check-input" type="checkbox" value="" id="Cb4">
        <label class="form-check-label" for="Cb4">
          양식
        </label>
      </div>
      <div class="form-check">
        <input class="form-check-input" type="checkbox" value="" id="Cb5">
        <label class="form-check-label" for="Cb5">
          패스트푸드
        </label>
      </div>
      <div class="form-check">
        <input class="form-check-input" type="checkbox" value="" id="Cb6">
        <label class="form-check-label" for="Cb6">
          도시락
        </label>
      </div>
      <div class="form-check">
        <input class="form-check-input" type="checkbox" value="" id="Cb7">
        <label class="form-check-label" for="Cb7">
          치킨
        </label>
      </div>
      <div class="form-check">
        <input class="form-check-input" type="checkbox" value="" id="Cb8">
        <label class="form-check-label" for="Cb8">
          간식
        </label>
      </div>
      <div class="form-check">
        <input class="form-check-input" type="checkbox" value="" id="Cb9">
        <label class="form-check-label" for="Cb9">
          술집
        </label>
      </div>
      <h1 style = "margin-top: 32px;">범위</h1><div id="range_value"></div>
      <input type="range" class="form-range" min="1" max="10" value="3" step="1" id="range" onclick="touchRange()">
      <a class="btn btn-primary fixed-button" role="button" onclick="Search()" href="/load">확인</a>
    </div>
    <script>
      function Send(data,dir) {
          fetch(dir, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)
          })
          .then(function(response) {
            // 서버 응답 처리
          })
          .catch(function(error) {
            // 오류 처리
          });
      }

      function Search() {
        var cb1 = document.getElementById('Cb1').checked,
            cb2 = document.getElementById('Cb2').checked,
            cb3 = document.getElementById('Cb3').checked,
            cb4 = document.getElementById('Cb4').checked,
            cb5 = document.getElementById('Cb5').checked,
            cb6 = document.getElementById('Cb6').checked,
            cb7 = document.getElementById('Cb7').checked,
            cb8 = document.getElementById('Cb8').checked,
            cb9 = document.getElementById('Cb9').checked,
            range = document.getElementById('range').value;

        var data = {
          cb1: cb1,
          cb2: cb2,
          cb3: cb3,
          cb4: cb4,
          cb5: cb5,
          cb6: cb6,
          cb7: cb7,
          cb8: cb8,
          cb9: cb9,
          range: range
        };

        Send(data,'/load')
      }

      function touchRange() {
        document.getElementById("range_value").textContent = document.getElementById('range').value + " km"
      }
      
      touchRange()
    </script>
  </body>
</html>